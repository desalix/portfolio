
<nav class="hidden sm:inline fixed z-1 inset-x-0 mx-auto px-8 top-6 max-w-3xl w-full">
  <div class="dark:bg-black/80 bg-white/80 backdrop-blur-xs border-2 dark:border-white/40 border-black/80 rounded-full px-6 py-2 shadow-xl shadow-black/15 dark:shadow-white/15">
    <div class="flex flex-row items-center justify-between">
      <!-- Left HOME button -->
      <div class="text-center">
        <a href="/" class="dark:text-gray-400 text-gray-700 dark:hover:text-white hover:text-black hover:font-medium transition-all duration-300">
          Home
        </a>
      </div>

      <!-- Middle navigation items -->
      <div class="flex justify-center items-center relative" data-hover-pill>
        <div id="hover-pill"
             class="pointer-events-none absolute top-0 left-0 rounded-xl dark:bg-gray-700/90 bg-gray-200/90
              opacity-0 transition-all duration-300 ease-out will-change-transform">
        </div>

        <div>
          <a href="#projects" class="nav-link">
            Projects
          </a>
        </div> 
        <div>
          <a href="#about" class="nav-link">
            About
          </a>
        </div>
        <div>
          <a href="#contact" class="nav-link">
            Contact
          </a>
        </div>
      </div>

      <!-- Color MODE button -->
      <div class="flex flex-row text-center gap-x-4">
        <button
          id="theme-toggle"
          type="button"
          aria-label="Toggle theme"
          class="relative z-20 cursor-pointer p-2 rounded-full active:ring-2"
        >
          <img
            src="../src/assets/light_mode.svg"
            alt="Light mode"
            class="hidden dark:inline"
          />
          <img
            src="../src/assets/night_mode.svg"
            alt="Dark mode"
            class="dark:hidden"
          />
        </button>
      
        
    </div>
  </div>
</nav>

<script>
  const root = document.documentElement;

  const setTheme = (dark: boolean) => {
    root.classList.toggle("dark", dark);
    localStorage.setItem("theme", dark ? "dark" : "light");
    root.style.colorScheme = dark ? "dark" : "light";
  };

  document.getElementById("theme-toggle")?.addEventListener("click", () => {
    setTheme(!root.classList.contains("dark"));
  });


  document.addEventListener('DOMContentLoaded', () => {
    const wrapper = document.querySelector<HTMLElement>('[data-hover-pill]');
    if (!wrapper) return;
    const wrapperEl: HTMLElement = wrapper;

    const pill = wrapperEl.querySelector<HTMLElement>('#hover-pill');
    if (!pill) return;
    const pillEl: HTMLElement = pill;

    pillEl.style.top = '0px';
    pillEl.style.left = '0px';

    const links = Array.from(
      wrapperEl.querySelectorAll<HTMLAnchorElement>('.nav-link')
    );
    if (links.length === 0) return;

    function movePill(toEl: HTMLElement) {
      const wrapBox = wrapperEl.getBoundingClientRect();
      const box = toEl.getBoundingClientRect();
      const x = box.left - wrapBox.left;
      const y = box.top - wrapBox.top;

      pillEl.style.transform = `translate(${x}px, ${y}px)`;
      pillEl.style.width = `${box.width}px`;
      pillEl.style.height = `${box.height}px`;
      pillEl.style.opacity = '1';
    }

    links.forEach((a) => {
      a.addEventListener('mouseenter', () => movePill(a));
    });

    wrapperEl.addEventListener('mouseleave', () => {
      pillEl.style.opacity = '0';
    });
  });
</script>
